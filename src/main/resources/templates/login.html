<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <title>登陆</title>
    <link rel="stylesheet" type="text/css" href="css/login.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" type="text/css" th:href="@{css/style.css}">

    <script type="text/javascript" src="js/asset/jquery.min.js"></script>
    <script src="js/asset/plugins/layer/layer.min.js"></script>
    <script type="text/javascript" src="js/self/commom_util.js"></script>

</head>
<body>
<div class="Login_outside">
    <header>
        <h2><img src='img/title.jpg'></h2>
    </header>
    <section style="height: 350px">
        <div class='mainpart'>
            <form id='loginPart' th:action="@{/login}" method="post" style="padding: 20px">
                <div style="display: flex;justify-content: center">
                    <img src="img/CCIC.png">
                    <h3>人力系统</h3>
                </div>
                <div class="form-group" style="margin: 20px 0px 20px 0px">
                    <label>账号</label>
                    <input type="text" class="form-control" name="username"
                           placeholder="请输入账号">
                </div>
                <div class="form-group">
                    <label>密码</label>
                    <input type="password" class="form-control" id="pwd" name="password"
                           placeholder="请输入密码">
                </div>

                <div style="color:red; margin: 20px 0px 0px 0px" th:if="${param.error}"
                     th:text="${loginMsg.getMessage()}">
                </div>
                <div style="width: 100%;position: relative">
                    <button type="submit" class="btn btn-default" v-on:click="doLogin"
                            style="width: 100%;background-color: #242424;color: white;font-size: 16px;position: absolute;z-index: 1;margin-top: 30px;margin-bottom: 20px">
                        登录
                    </button>
                    <div class="ibox-content"
                         style="width: 40px;height: 40px;position: absolute;z-index: 2;display: none">
                        <div class="sk-spinner sk-spinner-fading-circle">
                            <div class="sk-circle1 sk-circle"></div>
                            <div class="sk-circle2 sk-circle"></div>
                            <div class="sk-circle3 sk-circle"></div>
                            <div class="sk-circle4 sk-circle"></div>
                            <div class="sk-circle5 sk-circle"></div>
                            <div class="sk-circle6 sk-circle"></div>
                            <div class="sk-circle7 sk-circle"></div>
                            <div class="sk-circle8 sk-circle"></div>
                            <div class="sk-circle9 sk-circle"></div>
                            <div class="sk-circle10 sk-circle"></div>
                            <div class="sk-circle11 sk-circle"></div>
                            <div class="sk-circle12 sk-circle"></div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </section>
</div>


<script th:inline="javascript">
    $(function () {
        let message = [[${loginMsg.getMessage()}]];
    });
    $("form").submit(function () {

        let username = $("input[name='username']").val();
        let password = $("input[name='password']").val();

        if (username == "" || username == null || username == undefined) {
            alert("账号不能为空");
            return false;/*阻止表单提交*/
        } else if (password == "" || password == null || password == undefined) {
            alert("密码不能为空");
            return false;/*阻止表单提交*/
        } else {
            showLoginLayer();
            return true;
        }
    });

    function showLoginLayer() {
        showLayer("登录中")
    }

    function showLayer(str) {
        layer.msg(( undefined || str == null) ? '加载中' : str, {
            time: 20000, //20s后自动关闭
            icon: 16
        });
    }
</script>
</body>

</html>
